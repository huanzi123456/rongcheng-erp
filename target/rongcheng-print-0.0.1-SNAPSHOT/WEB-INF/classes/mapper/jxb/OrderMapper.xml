<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.rongcheng.erp.dao.Jxb_OrderDAO" >
  <resultMap id="BaseResultMap" type="com.rongcheng.erp.entity.OrderInfo" >
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="erp_order_num" property="erpOrderNum" jdbcType="CHAR" />
    <result column="platform_order_id" property="platformOrderId" jdbcType="BIGINT" />
    <result column="platform_id" property="platformId" jdbcType="BIGINT" />
    <result column="shop_id" property="shopId" jdbcType="BIGINT" />
    <result column="is_online_order" property="onlineOrder" jdbcType="BIT" />
    <result column="platform_buyer_id" property="platformBuyerId" jdbcType="BIGINT" />
    <result column="carrier_id" property="carrierId" jdbcType="BIGINT" />
    <result column="is_electronic_waybill" property="electronicWaybill" jdbcType="BIT" />
    <result column="tracking_num" property="trackingNum" jdbcType="BIGINT" />
    <result column="buyer_word" property="buyerWord" jdbcType="VARCHAR" />
    <result column="seller_word" property="sellerWord" jdbcType="VARCHAR" />
    <result column="order_create" property="orderCreate" jdbcType="TIMESTAMP" />
    <result column="order_pay" property="orderPay" jdbcType="TIMESTAMP" />
    <result column="order_download" property="orderDownload" jdbcType="TIMESTAMP" />
    <result column="order_edit" property="orderEdit" jdbcType="TIMESTAMP" />
    <result column="order_upload" property="orderUpload" jdbcType="TIMESTAMP" />
    <result column="order_merge" property="orderMerge" jdbcType="TIMESTAMP" />
    <result column="order_split" property="orderSplit" jdbcType="TIMESTAMP" />
    <result column="order_check" property="orderCheck" jdbcType="TIMESTAMP" />
    <result column="express_sheet_print" property="expressSheetPrint" jdbcType="TIMESTAMP" />
    <result column="sale_bill_print" property="saleBillPrint" jdbcType="TIMESTAMP" />
    <result column="order_outbound" property="orderOutbound" jdbcType="TIMESTAMP" />
    <result column="order_inspect" property="orderInspect" jdbcType="TIMESTAMP" />
    <result column="order_departure" property="orderDeparture" jdbcType="TIMESTAMP" />
    <result column="refund_apply" property="refundApply" jdbcType="TIMESTAMP" />
    <result column="order_locked" property="orderLocked" jdbcType="TIMESTAMP" />
    <result column="order_closed" property="orderClosed" jdbcType="TIMESTAMP" />
    <result column="order_completed" property="orderCompleted" jdbcType="TIMESTAMP" />
    <result column="order_status" property="orderStatus" jdbcType="TINYINT" />
    <result column="refund_close" property="refundClose" jdbcType="BIT" />
    <result column="is_order_hold" property="orderHold" jdbcType="BIT" />
    <result column="shipping_fee" property="shippingFee" jdbcType="DECIMAL" />
    <result column="is_postage_prepaid" property="postagePrepaid" jdbcType="BIT" />
    <result column="is_order_cod" property="orderCod" jdbcType="BIT" />
    <result column="is_order_special" property="orderSpecial" jdbcType="BIT" />
    <result column="lot_code" property="lotCode" jdbcType="VARCHAR" />
    <result column="invoice_type" property="invoiceType" jdbcType="BIT" />
    <result column="invoice_title" property="invoiceTitle" jdbcType="VARCHAR" />
    <result column="taxpayer_id" property="taxpayerId" jdbcType="BIGINT" />
    <result column="invoice_detail" property="invoiceDetail" jdbcType="VARCHAR" />
    <result column="order_feedback_code" property="orderFeedbackCode" jdbcType="BIT" />
    <result column="reserved1" property="reserved1" jdbcType="VARCHAR" />
    <result column="reserved2" property="reserved2" jdbcType="VARCHAR" />
    <result column="note" property="note" jdbcType="VARCHAR" />
    <result column="order_secret_key" property="orderSecretKey" jdbcType="VARCHAR" />
    <result column="owner_id" property="ownerId" jdbcType="BIGINT" />
    <result column="operator_id" property="operatorId" jdbcType="BIGINT" />
    <result column="is_authorized" property="authorized" jdbcType="BIT" />
    <result column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
    <result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Insert_Column">
  	<trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="erpOrderNum != null" >
        erp_order_num,
      </if>
      <if test="platformOrderId != null" >
        platform_order_id,
      </if>
      <if test="platformId != null" >
        platform_id,
      </if>
      <if test="shopId != null" >
        shop_id,
      </if>
      <if test="onlineOrder != null" >
        is_online_order,
      </if>
      <if test="platformBuyerId != null" >
        platform_buyer_id,
      </if>
      <if test="carrierId != null" >
        carrier_id,
      </if>
      <if test="electronicWaybill != null" >
        is_electronic_waybill,
      </if>
      <if test="trackingNum != null" >
        tracking_num,
      </if>
      <if test="buyerWord != null" >
        buyer_word,
      </if>
      <if test="sellerWord != null" >
        seller_word,
      </if>
      <if test="orderCreate != null" >
        order_create,
      </if>
      <if test="orderPay != null" >
        order_pay,
      </if>
      <if test="orderDownload != null" >
        order_download,
      </if>
      <if test="orderEdit != null" >
        order_edit,
      </if>
      <if test="orderUpload != null" >
        order_upload,
      </if>
      <if test="orderMerge != null" >
        order_merge,
      </if>
      <if test="orderSplit != null" >
        order_split,
      </if>
      <if test="orderCheck != null" >
        order_check,
      </if>
      <if test="expressSheetPrint != null" >
        express_sheet_print,
      </if>
      <if test="saleBillPrint != null" >
        sale_bill_print,
      </if>
      <if test="orderOutbound != null" >
        order_outbound,
      </if>
      <if test="orderInspect != null" >
        order_inspect,
      </if>
      <if test="orderDeparture != null" >
        order_departure,
      </if>
      <if test="refundApply != null" >
        refund_apply,
      </if>
      <if test="orderLocked != null" >
        order_locked,
      </if>
      <if test="orderClosed != null" >
        order_closed,
      </if>
      <if test="orderCompleted != null" >
        order_completed,
      </if>
      <if test="orderStatus != null" >
        order_status,
      </if>
      <if test="refundClose != null" >
        refund_close,
      </if>
      <if test="orderHold != null" >
        is_order_hold,
      </if>
      <if test="shippingFee != null" >
        shipping_fee,
      </if>
      <if test="postagePrepaid != null" >
        is_postage_prepaid,
      </if>
      <if test="orderCod != null" >
        is_order_cod,
      </if>
      <if test="orderSpecial != null" >
        is_order_special,
      </if>
      <if test="lotCode != null" >
        lot_code,
      </if>
      <if test="invoiceType != null" >
        invoice_type,
      </if>
      <if test="invoiceTitle != null" >
        invoice_title,
      </if>
      <if test="taxpayerId != null" >
        taxpayer_id,
      </if>
      <if test="invoiceDetail != null" >
        invoice_detail,
      </if>
      <if test="orderFeedbackCode != null" >
        order_feedback_code,
      </if>
      <if test="reserved1 != null" >
        reserved1,
      </if>
      <if test="reserved2 != null" >
        reserved2,
      </if>
      <if test="note != null" >
        note,
      </if>
      <if test="orderSecretKey != null" >
        order_secret_key,
      </if>
      <if test="ownerId != null" >
        owner_id,
      </if>
      <if test="operatorId != null" >
        operator_id,
      </if>
      <if test="authorized != null" >
        is_authorized,
      </if>
      <if test="gmtCreate != null" >
        gmt_create,
      </if>
      <if test="gmtModified != null" >
        gmt_modified,
      </if>
    </trim>
  </sql>
  <sql id="Base_Insert_Values">
  	<trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="erpOrderNum != null" >
        #{erpOrderNum,jdbcType=CHAR},
      </if>
      <if test="platformOrderId != null" >
        #{platformOrderId,jdbcType=BIGINT},
      </if>
      <if test="platformId != null" >
        #{platformId,jdbcType=BIGINT},
      </if>
      <if test="shopId != null" >
        #{shopId,jdbcType=BIGINT},
      </if>
      <if test="onlineOrder != null" >
        #{onlineOrder,jdbcType=BIT},
      </if>
      <if test="platformBuyerId != null" >
        #{platformBuyerId,jdbcType=BIGINT},
      </if>
      <if test="carrierId != null" >
        #{carrierId,jdbcType=BIGINT},
      </if>
      <if test="electronicWaybill != null" >
        #{electronicWaybill,jdbcType=BIT},
      </if>
      <if test="trackingNum != null" >
        #{trackingNum,jdbcType=BIGINT},
      </if>
      <if test="buyerWord != null" >
        #{buyerWord,jdbcType=VARCHAR},
      </if>
      <if test="sellerWord != null" >
        #{sellerWord,jdbcType=VARCHAR},
      </if>
      <if test="orderCreate != null" >
        #{orderCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="orderPay != null" >
        #{orderPay,jdbcType=TIMESTAMP},
      </if>
      <if test="orderDownload != null" >
        #{orderDownload,jdbcType=TIMESTAMP},
      </if>
      <if test="orderEdit != null" >
        #{orderEdit,jdbcType=TIMESTAMP},
      </if>
      <if test="orderUpload != null" >
        #{orderUpload,jdbcType=TIMESTAMP},
      </if>
      <if test="orderMerge != null" >
        #{orderMerge,jdbcType=TIMESTAMP},
      </if>
      <if test="orderSplit != null" >
        #{orderSplit,jdbcType=TIMESTAMP},
      </if>
      <if test="orderCheck != null" >
        #{orderCheck,jdbcType=TIMESTAMP},
      </if>
      <if test="expressSheetPrint != null" >
        #{expressSheetPrint,jdbcType=TIMESTAMP},
      </if>
      <if test="saleBillPrint != null" >
        #{saleBillPrint,jdbcType=TIMESTAMP},
      </if>
      <if test="orderOutbound != null" >
        #{orderOutbound,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInspect != null" >
        #{orderInspect,jdbcType=TIMESTAMP},
      </if>
      <if test="orderDeparture != null" >
        #{orderDeparture,jdbcType=TIMESTAMP},
      </if>
      <if test="refundApply != null" >
        #{refundApply,jdbcType=TIMESTAMP},
      </if>
      <if test="orderLocked != null" >
        #{orderLocked,jdbcType=TIMESTAMP},
      </if>
      <if test="orderClosed != null" >
        #{orderClosed,jdbcType=TIMESTAMP},
      </if>
      <if test="orderCompleted != null" >
        #{orderCompleted,jdbcType=TIMESTAMP},
      </if>
      <if test="orderStatus != null" >
        #{orderStatus,jdbcType=TINYINT},
      </if>
      <if test="refundClose != null" >
        #{refundClose,jdbcType=BIT},
      </if>
      <if test="orderHold != null" >
        #{orderHold,jdbcType=BIT},
      </if>
      <if test="shippingFee != null" >
        #{shippingFee,jdbcType=DECIMAL},
      </if>
      <if test="postagePrepaid != null" >
        #{postagePrepaid,jdbcType=BIT},
      </if>
      <if test="orderCod != null" >
        #{orderCod,jdbcType=BIT},
      </if>
      <if test="orderSpecial != null" >
        #{orderSpecial,jdbcType=BIT},
      </if>
      <if test="lotCode != null" >
        #{lotCode,jdbcType=VARCHAR},
      </if>
      <if test="invoiceType != null" >
        #{invoiceType,jdbcType=BIT},
      </if>
      <if test="invoiceTitle != null" >
        #{invoiceTitle,jdbcType=VARCHAR},
      </if>
      <if test="taxpayerId != null" >
        #{taxpayerId,jdbcType=BIGINT},
      </if>
      <if test="invoiceDetail != null" >
        #{invoiceDetail,jdbcType=VARCHAR},
      </if>
      <if test="orderFeedbackCode != null" >
        #{orderFeedbackCode,jdbcType=BIT},
      </if>
      <if test="reserved1 != null" >
        #{reserved1,jdbcType=VARCHAR},
      </if>
      <if test="reserved2 != null" >
        #{reserved2,jdbcType=VARCHAR},
      </if>
      <if test="note != null" >
        #{note,jdbcType=VARCHAR},
      </if>
      <if test="orderSecretKey != null" >
        #{orderSecretKey,jdbcType=VARCHAR},
      </if>
      <if test="ownerId != null" >
        #{ownerId,jdbcType=BIGINT},
      </if>
      <if test="operatorId != null" >
        #{operatorId,jdbcType=BIGINT},
      </if>
      <if test="authorized != null" >
        #{authorized,jdbcType=BIT},
      </if>
      <if test="gmtCreate != null" >
        #{gmtCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="gmtModified != null" >
        #{gmtModified,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </sql>
  
    <sql id="List_Insert_Column">
  	<trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="list[0].id != null" >
        id,
      </if>
      <if test="list[0].erpOrderNum != null" >
        erp_order_num,
      </if>
      <if test="list[0].platformOrderId != null" >
        platform_order_id,
      </if>
      <if test="list[0].platformId != null" >
        platform_id,
      </if>
      <if test="list[0].shopId != null" >
        shop_id,
      </if>
      <if test="list[0].onlineOrder != null" >
        is_online_order,
      </if>
      <if test="list[0].platformBuyerId != null" >
        platform_buyer_id,
      </if>
      <if test="list[0].carrierId != null" >
        carrier_id,
      </if>
      <if test="list[0].electronicWaybill != null" >
        is_electronic_waybill,
      </if>
      <if test="list[0].trackingNum != null" >
        tracking_num,
      </if>
      <if test="list[0].buyerWord != null" >
        buyer_word,
      </if>
      <if test="list[0].sellerWord != null" >
        seller_word,
      </if>
      <if test="list[0].orderCreate != null" >
        order_create,
      </if>
      <if test="list[0].orderPay != null" >
        order_pay,
      </if>
      <if test="list[0].orderDownload != null" >
        order_download,
      </if>
      <if test="list[0].orderEdit != null" >
        order_edit,
      </if>
      <if test="list[0].orderUpload != null" >
        order_upload,
      </if>
      <if test="list[0].orderMerge != null" >
        order_merge,
      </if>
      <if test="list[0].orderSplit != null" >
        order_split,
      </if>
      <if test="list[0].orderCheck != null" >
        order_check,
      </if>
      <if test="list[0].expressSheetPrint != null" >
        express_sheet_print,
      </if>
      <if test="list[0].saleBillPrint != null" >
        sale_bill_print,
      </if>
      <if test="list[0].orderOutbound != null" >
        order_outbound,
      </if>
      <if test="list[0].orderInspect != null" >
        order_inspect,
      </if>
      <if test="list[0].orderDeparture != null" >
        order_departure,
      </if>
      <if test="list[0].refundApply != null" >
        refund_apply,
      </if>
      <if test="list[0].orderLocked != null" >
        order_locked,
      </if>
      <if test="list[0].orderClosed != null" >
        order_closed,
      </if>
      <if test="list[0].orderCompleted != null" >
        order_completed,
      </if>
      <if test="list[0].orderStatus != null" >
        order_status,
      </if>
      <if test="list[0].refundClose != null" >
        refund_close,
      </if>
      <if test="list[0].orderHold != null" >
        is_order_hold,
      </if>
      <if test="list[0].shippingFee != null" >
        shipping_fee,
      </if>
      <if test="list[0].postagePrepaid != null" >
        is_postage_prepaid,
      </if>
      <if test="list[0].orderCod != null" >
        is_order_cod,
      </if>
      <if test="list[0].orderSpecial != null" >
        is_order_special,
      </if>
      <if test="list[0].lotCode != null" >
        lot_code,
      </if>
      <if test="list[0].invoiceType != null" >
        invoice_type,
      </if>
      <if test="list[0].invoiceTitle != null" >
        invoice_title,
      </if>
      <if test="list[0].taxpayerId != null" >
        taxpayer_id,
      </if>
      <if test="list[0].invoiceDetail != null" >
        invoice_detail,
      </if>
      <if test="list[0].orderFeedbackCode != null" >
        order_feedback_code,
      </if>
      <if test="list[0].reserved1 != null" >
        reserved1,
      </if>
      <if test="list[0].reserved2 != null" >
        reserved2,
      </if>
      <if test="list[0].note != null" >
        note,
      </if>
      <if test="list[0].orderSecretKey != null" >
        order_secret_key,
      </if>
      <if test="list[0].ownerId != null" >
        owner_id,
      </if>
      <if test="list[0].operatorId != null" >
        operator_id,
      </if>
      <if test="list[0].authorized != null" >
        is_authorized,
      </if>
      <if test="list[0].gmtCreate != null" >
        gmt_create,
      </if>
      <if test="list[0].gmtModified != null" >
        gmt_modified,
      </if>
    </trim>
  </sql>
  <sql id="List_Insert_Values">
  	<trim suffixOverrides="," >
      <if test="orderInfo.id != null" >
         #{orderInfo.id,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.erpOrderNum != null" >
         #{orderInfo.erpOrderNum,jdbcType=CHAR},
      </if>
      <if test="orderInfo.platformOrderId != null" >
         #{orderInfo.platformOrderId,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.platformId != null" >
         #{orderInfo.platformId,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.shopId != null" >
         #{orderInfo.shopId,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.onlineOrder != null" >
         #{orderInfo.onlineOrder,jdbcType=BIT},
      </if>
      <if test="orderInfo.platformBuyerId != null" >
         #{orderInfo.platformBuyerId,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.carrierId != null" >
         #{orderInfo.carrierId,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.electronicWaybill != null" >
         #{orderInfo.electronicWaybill,jdbcType=BIT},
      </if>
      <if test="orderInfo.trackingNum != null" >
         #{orderInfo.trackingNum,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.buyerWord != null" >
         #{orderInfo.buyerWord,jdbcType=VARCHAR},
      </if>
      <if test="orderInfo.sellerWord != null" >
         #{orderInfo.sellerWord,jdbcType=VARCHAR},
      </if>
      <if test="orderInfo.orderCreate != null" >
         #{orderInfo.orderCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderPay != null" >
         #{orderInfo.orderPay,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderDownload != null" >
         #{orderInfo.orderDownload,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderEdit != null" >
         #{orderInfo.orderEdit,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderUpload != null" >
         #{orderInfo.orderUpload,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderMerge != null" >
         #{orderInfo.orderMerge,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderSplit != null" >
         #{orderInfo.orderSplit,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderCheck != null" >
         #{orderInfo.orderCheck,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.expressSheetPrint != null" >
         #{orderInfo.expressSheetPrint,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.saleBillPrint != null" >
         #{orderInfo.saleBillPrint,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderOutbound != null" >
         #{orderInfo.orderOutbound,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderInspect != null" >
         #{orderInfo.orderInspect,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderDeparture != null" >
         #{orderInfo.orderDeparture,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.refundApply != null" >
         #{orderInfo.refundApply,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderLocked != null" >
         #{orderInfo.orderLocked,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderClosed != null" >
         #{orderInfo.orderClosed,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderCompleted != null" >
         #{orderInfo.orderCompleted,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.orderStatus != null" >
         #{orderInfo.orderStatus,jdbcType=TINYINT},
      </if>
      <if test="orderInfo.refundClose != null" >
         #{orderInfo.refundClose,jdbcType=BIT},
      </if>
      <if test="orderInfo.orderHold != null" >
         #{orderInfo.orderHold,jdbcType=BIT},
      </if>
      <if test="orderInfo.shippingFee != null" >
         #{orderInfo.shippingFee,jdbcType=DECIMAL},
      </if>
      <if test="orderInfo.postagePrepaid != null" >
         #{orderInfo.postagePrepaid,jdbcType=BIT},
      </if>
      <if test="orderInfo.orderCod != null" >
         #{orderInfo.orderCod,jdbcType=BIT},
      </if>
      <if test="orderInfo.orderSpecial != null" >
         #{orderInfo.orderSpecial,jdbcType=BIT},
      </if>
      <if test="orderInfo.lotCode != null" >
         #{orderInfo.lotCode,jdbcType=VARCHAR},
      </if>
      <if test="orderInfo.invoiceType != null" >
         #{orderInfo.invoiceType,jdbcType=BIT},
      </if>
      <if test="orderInfo.invoiceTitle != null" >
         #{orderInfo.invoiceTitle,jdbcType=VARCHAR},
      </if>
      <if test="orderInfo.taxpayerId != null" >
         #{orderInfo.taxpayerId,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.invoiceDetail != null" >
         #{orderInfo.invoiceDetail,jdbcType=VARCHAR},
      </if>
      <if test="orderInfo.orderFeedbackCode != null" >
         #{orderInfo.orderFeedbackCode,jdbcType=BIT},
      </if>
      <if test="orderInfo.reserved1 != null" >
         #{orderInfo.reserved1,jdbcType=VARCHAR},
      </if>
      <if test="orderInfo.reserved2 != null" >
         #{orderInfo.reserved2,jdbcType=VARCHAR},
      </if>
      <if test="orderInfo.note != null" >
         #{orderInfo.note,jdbcType=VARCHAR},
      </if>
      <if test="orderInfo.orderSecretKey != null" >
         #{orderInfo.orderSecretKey,jdbcType=VARCHAR},
      </if>
      <if test="orderInfo.ownerId != null" >
         #{orderInfo.ownerId,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.operatorId != null" >
         #{orderInfo.operatorId,jdbcType=BIGINT},
      </if>
      <if test="orderInfo.authorized != null" >
         #{orderInfo.authorized,jdbcType=BIT},
      </if>
      <if test="orderInfo.gmtCreate != null" >
         #{orderInfo.gmtCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="orderInfo.gmtModified != null" >
         #{orderInfo.gmtModified,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </sql>
  
  <sql id="Min_Column_List" >
    id,					<!-- #订单id -->
	erp_order_num,		<!-- #订单erp编码 -->
	platform_order_id,	<!-- #平台订单id -->
	invoice_title,		<!-- #发票抬头 -->
	invoice_detail,		<!-- #发票明细 -->
	buyer_word,			<!-- #买家留言 -->
	seller_word,		<!-- #卖家备注 -->
	order_pay,			<!-- #付款时间 -->
	order_status,		<!-- #订单状态 -->
	
	platform_id,		<!-- #平台id -->
	shop_id,			<!-- #店铺id -->
	platform_buyer_id,	<!-- #买家id -->
	carrier_id,			<!-- #快递id -->
	tracking_num		<!-- #快递单号 -->
  </sql>
  <sql id="Base_Column_List" >
    id, erp_order_num, platform_order_id, platform_id, shop_id, is_online_order, platform_buyer_id, 
    carrier_id, is_electronic_waybill, tracking_num, buyer_word, seller_word, order_create, 
    order_pay, order_download, order_edit, order_upload, order_merge, order_split, order_check, 
    express_sheet_print, sale_bill_print, order_outbound, order_inspect, order_departure, 
    refund_apply, order_locked, order_closed, order_completed, order_status, refund_close, 
    is_order_hold, shipping_fee, is_postage_prepaid, is_order_cod, is_order_special, 
    lot_code, invoice_type, invoice_title, taxpayer_id, invoice_detail, order_feedback_code, 
    reserved1, reserved2, note, order_secret_key, owner_id, operator_id, is_authorized, 
    gmt_create, gmt_modified
  </sql>
  <sql id="Order_Where" >
     owner_id=#{ownerId,jdbcType=BIGINT}
	 <if test="id != null" >
       AND id=#{id,jdbcType=BIGINT}
     </if>
     <if test="orderHold != null" >
       AND is_order_hold = #{orderHold,jdbcType=BIT}
     </if>
     <if test="refundClose != null" >
     	AND refund_close = #{refundClose}
     </if>
     <if test="orderCreate != null" >
       AND order_create > #{orderCreate}
     </if>
     <if test="time1 != null" >
       AND order_create BETWEEN #{time1} AND #{time2}
     </if>
     <if test="refundClose == null" ><!-- 默认无退款 -->
		  AND (refund_close = 0 OR refund_close IS null )
	      <if test="orderCod != null" >
	        AND is_order_cod = #{orderCod}
	      </if>
	      <if test="onlineOrder != null" >
	        AND is_online_order = #{onlineOrder}
	      </if>
	      <choose>
	      	<when test="expressSheetPrint != null and saleBillPrint != null">
		        AND express_sheet_print IS NOT NULL
		        AND sale_bill_print IS NOT NULL
		      	AND order_status IN (4,5)
	      	</when>
	      	<when test="expressSheetPrint != null || saleBillPrint != null">
		      <if test="expressSheetPrint != null" >
		        AND express_sheet_print IS NOT NULL
		      </if>
		      <if test="saleBillPrint != null" >
		        AND sale_bill_print IS NOT NULL
		      </if>
	      	</when>
	      </choose>
		  <if test="buyerWord != null || sellerWord != null" >
	        AND (seller_word IS NOT NULL AND seller_word != '' OR buyer_word IS NOT NULL AND buyer_word != '')
	      </if>
	      <if test="invoiceTitle != null" >
	        AND invoice_title like CONCAT('%',#{invoiceTitle},'%')
	      </if>
	      <if test="orderStatus != null" ><!-- 状态 -->
		      AND (order_status = #{orderStatus}<!-- 1未付款，3已审核 ，6已出库，7已发货，8物流运输异常，9已签收，10订单完成。 -->
			      <choose>
			      	<when test="orderStatus == 2"><!-- 已付款  或 货到付款-->
			      	 <if test="orderCod == null" >
				        OR is_order_cod = 1
				     </if>
			      	</when>
			      </choose>)
	      </if>
	      <if test="orderStatusArray != null"><!-- 订单状态(目前仅允许填入7,8,9，且orderStatus必须为null) -->
		 	AND order_status IN
			 	<foreach collection="orderStatusArray" index="index" item="item" open="(" separator="," close=")">
	    			#{item}
	    		</foreach>
	      </if>
  	 </if>
     <if test="carrierIdArray != null" >
		AND carrier_id in
   			<foreach item="item" index="index" collection="carrierIdArray" open="(" separator="," close=")">  
                	#{item}
       			</foreach>
     </if>
  </sql>
  <select id="countSelective" resultType="int">
  		select count(*) from order_info
  		<where>
			<include refid="Order_Where"></include>
		</where>
  </select>
  <insert id="insertSelective" parameterType="com.rongcheng.erp.entity.OrderInfo" useGeneratedKeys="true" keyProperty="id">
    insert into order_info
    <include refid="Base_Insert_Column"/>
    values
    <include refid="Base_Insert_Values"/>
  </insert>
  <insert id="insertListSelective">
    insert into order_info
    <include refid="List_Insert_Column"/>
    values
    <foreach collection="list" item="orderInfo" separator=",">
	    (  
			<include refid="List_Insert_Values"/>
		)
    </foreach>
  </insert>
  
  <update id="updateByIdSelective" >
    update order_info
    <set >
      <if test="record.erpOrderNum != null" >
        erp_order_num = #{record.erpOrderNum,jdbcType=CHAR},
      </if>
      <if test="record.platformOrderId != null" >
        platform_order_id = #{record.platformOrderId,jdbcType=BIGINT},
      </if>
      <if test="record.platformId != null" >
        platform_id = #{record.platformId,jdbcType=BIGINT},
      </if>
      <if test="record.shopId != null" >
        shop_id = #{record.shopId,jdbcType=BIGINT},
      </if>
      <if test="record.onlineOrder != null" >
        is_online_order = #{record.onlineOrder,jdbcType=BIT},
      </if>
      <if test="record.platformBuyerId != null" >
        platform_buyer_id = #{record.platformBuyerId,jdbcType=BIGINT},
      </if>
      <if test="record.carrierId != null" >
        carrier_id = #{record.carrierId,jdbcType=BIGINT},
      </if>
      <if test="record.electronicWaybill != null" >
        is_electronic_waybill = #{record.electronicWaybill,jdbcType=BIT},
      </if>
      <if test="record.trackingNum != null" >
        tracking_num = #{record.trackingNum,jdbcType=BIGINT},
      </if>
      <if test="record.buyerWord != null" >
        buyer_word = #{record.buyerWord,jdbcType=VARCHAR},
      </if>
      <if test="record.sellerWord != null" >
        seller_word = #{record.sellerWord,jdbcType=VARCHAR},
      </if>
      <if test="record.orderCreate != null" >
        order_create = #{record.orderCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderPay != null" >
        order_pay = #{record.orderPay,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderDownload != null" >
        order_download = #{record.orderDownload,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderEdit != null" >
        order_edit = #{record.orderEdit,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderUpload != null" >
        order_upload = #{record.orderUpload,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderMerge != null" >
        order_merge = #{record.orderMerge,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderSplit != null" >
        order_split = #{record.orderSplit,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderCheck != null" >
        order_check = #{record.orderCheck,jdbcType=TIMESTAMP},
      </if>
      <if test="record.expressSheetPrint != null" >
        express_sheet_print = #{record.expressSheetPrint,jdbcType=TIMESTAMP},
      </if>
      <if test="record.saleBillPrint != null" >
        sale_bill_print = #{record.saleBillPrint,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderOutbound != null" >
        order_outbound = #{record.orderOutbound,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderInspect != null" >
        order_inspect = #{record.orderInspect,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderDeparture != null" >
        order_departure = #{record.orderDeparture,jdbcType=TIMESTAMP},
      </if>
      <if test="record.refundApply != null" >
        refund_apply = #{record.refundApply,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderLocked != null" >
        order_locked = #{record.orderLocked,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderClosed != null" >
        order_closed = #{record.orderClosed,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderCompleted != null" >
        order_completed = #{record.orderCompleted,jdbcType=TIMESTAMP},
      </if>
      <if test="record.orderStatus != null" >
        order_status = #{record.orderStatus,jdbcType=TINYINT},
      </if>
      <if test="record.refundClose != null" >
        refund_close = #{record.refundClose,jdbcType=BIT},
      </if>
      <if test="record.orderHold != null" >
        is_order_hold = #{record.orderHold,jdbcType=BIT},
      </if>
      <if test="record.shippingFee != null" >
        shipping_fee = #{record.shippingFee,jdbcType=DECIMAL},
      </if>
      <if test="record.postagePrepaid != null" >
        is_postage_prepaid = #{record.postagePrepaid,jdbcType=BIT},
      </if>
      <if test="record.orderCod != null" >
        is_order_cod = #{record.orderCod,jdbcType=BIT},
      </if>
      <if test="record.orderSpecial != null" >
        is_order_special = #{record.orderSpecial,jdbcType=BIT},
      </if>
      <if test="record.lotCode != null" >
        lot_code = #{record.lotCode,jdbcType=VARCHAR},
      </if>
      <if test="record.invoiceType != null" >
        invoice_type = #{record.invoiceType,jdbcType=BIT},
      </if>
      <if test="record.invoiceTitle != null" >
        invoice_title = #{record.invoiceTitle,jdbcType=VARCHAR},
      </if>
      <if test="record.taxpayerId != null" >
        taxpayer_id = #{record.taxpayerId,jdbcType=BIGINT},
      </if>
      <if test="record.invoiceDetail != null" >
        invoice_detail = #{record.invoiceDetail,jdbcType=VARCHAR},
      </if>
      <if test="record.orderFeedbackCode != null" >
        order_feedback_code = #{record.orderFeedbackCode,jdbcType=BIT},
      </if>
      <if test="record.reserved1 != null" >
        reserved1 = #{record.reserved1,jdbcType=VARCHAR},
      </if>
      <if test="record.reserved2 != null" >
        reserved2 = #{record.reserved2,jdbcType=VARCHAR},
      </if>
      <if test="record.note != null" >
        note = #{record.note,jdbcType=VARCHAR},
      </if>
      <if test="record.orderSecretKey != null" >
        order_secret_key = #{record.orderSecretKey,jdbcType=VARCHAR},
      </if>
      <if test="record.operatorId != null" >
        operator_id = #{record.operatorId,jdbcType=BIGINT},
      </if>
      <if test="record.authorized != null" >
        is_authorized = #{record.authorized,jdbcType=BIT},
      </if>
      <if test="record.gmtCreate != null" >
        gmt_create = #{record.gmtCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.gmtModified != null" >
        gmt_modified = #{record.gmtModified,jdbcType=TIMESTAMP},
      </if>
    </set>
    where
    	id in
    		<foreach collection="ids" index="index" item="item" open="(" separator="," close=")">
    			#{item}
    		</foreach>
    	AND owner_id = #{record.ownerId,jdbcType=BIGINT}
  </update>
  
  
  <!-- 复合查询 -->
  <resultMap id="ResultMap" type="com.rongcheng.erp.dto.OrderItemInfo_S"
  		extends="BaseResultMap">
	<collection column="itemId" property="itemCommonWarehouse_S" ofType="com.rongcheng.erp.dto.ItemCommonWarehouse_S">
        <id column="iid" property="id" jdbcType="BIGINT" />
	    <result column="erp_item_num" property="erpItemNum" jdbcType="CHAR" />
	    <result column="name" property="name" jdbcType="VARCHAR" />
	    <result column="short_name" property="shortName" jdbcType="CHAR" />
	    <result column="platform_id" property="platformId" jdbcType="BIGINT" />
	    <result column="platform_item_sku" property="platformItemSku" jdbcType="BIGINT" />
	    <result column="user_shop_code" property="userShopCode" jdbcType="VARCHAR" />
	    <result column="user_item_code" property="userItemCode" jdbcType="VARCHAR" />
	    <result column="image1" property="image1" jdbcType="VARCHAR" />
	    <result column="category" property="category" jdbcType="VARCHAR" />
	    <result column="brand" property="brand" jdbcType="VARCHAR" />
	    <result column="series" property="series" jdbcType="VARCHAR" />
	    <result column="color" property="color" jdbcType="VARCHAR" />
	    <result column="size" property="size" jdbcType="VARCHAR" />
	    <result column="normal_price" property="normalPrice" jdbcType="DECIMAL" />
	    <result column="cost_price" property="costPrice" jdbcType="DECIMAL" />
	    <result column="promotion_price" property="promotionPrice" jdbcType="DECIMAL" />
	    <result column="bar_code" property="barCode" jdbcType="VARCHAR" />
	    <result column="package_condition" property="packageCondition" jdbcType="VARCHAR" />
	    <result column="user_classification" property="userClassification" jdbcType="VARCHAR" />
	    <result column="is_presell" property="presell" jdbcType="BIT" />
	    <result column="is_commission_sell" property="commissionSell" jdbcType="BIT" />
	    <result column="is_gift" property="gift" jdbcType="BIT" />
	    <result column="bar_code_image" property="barCodeImage" jdbcType="VARCHAR" />
	    <result column="qr_code_image" property="qrCodeImage" jdbcType="VARCHAR" />
	    <result column="reserved1" property="reserved1" jdbcType="VARCHAR" />
	    <result column="note" property="note" jdbcType="VARCHAR" />
	    <result column="is_authorized" property="authorized" jdbcType="BIT" />
	    <result column="item_secret_key" property="itemSecretKey" jdbcType="VARCHAR" />
	    <result column="owner_id" property="ownerId" jdbcType="BIGINT" />
	    <result column="shop_id" property="shopId" jdbcType="BIGINT" />
	    <result column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
	    <result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
	    <result column="operator_id" property="operatorId" jdbcType="BIGINT" />
	    <result column="spec" property="spec" jdbcType="VARCHAR" />
	    <result column="quantity" property="quantity" jdbcType="INTEGER" />
	    <collection column="warehouseId" property="warehouseInfo" ofType="com.rongcheng.erp.entity.WarehouseInfo">
		    <id column="id" property="id" jdbcType="BIGINT" />
		    <result column="wname" property="name" jdbcType="VARCHAR" />
		    <result column="position" property="position" jdbcType="VARCHAR" />
		    <result column="shelf_code" property="shelfCode" jdbcType="VARCHAR" />
		    <result column="consignor_name" property="consignorName" jdbcType="VARCHAR" />
		    <result column="consignor_tel" property="consignorTel" jdbcType="VARCHAR" />
		    <result column="consignor_mobile" property="consignorMobile" jdbcType="VARCHAR" />
		    <result column="region_id" property="regionId" jdbcType="BIGINT" />
		    <result column="user_address" property="userAddress" jdbcType="VARCHAR" />
		    <result column="note" property="note" jdbcType="VARCHAR" />
		    <result column="owner_id" property="ownerId" jdbcType="BIGINT" />
		    <result column="operator_id" property="operatorId" jdbcType="BIGINT" />
		    <result column="is_authorized" property="authorized" jdbcType="BIT" />
		    <result column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
		    <result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
	    </collection>
    </collection>
  </resultMap>
	<sql id="Base_Search1" >
		SELECT
			oiw.id,				<!-- #订单id -->
			oiw.erp_order_num,		<!-- #订单erp编码 -->
			oiw.platform_order_id,	<!-- #平台订单id -->
			oiw.invoice_title,		<!-- #发票抬头 -->
			oiw.invoice_detail,		<!-- #发票明细 -->
			oiw.buyer_word,			<!-- #买家留言 -->
			oiw.seller_word,		<!-- #卖家备注 -->
			oiw.order_pay,			<!-- #付款时间 -->
			oiw.order_status,		<!-- #订单状态 -->
			
			oiw.platform_id,		<!-- #平台id -->
			oiw.shop_id,			<!-- #店铺id -->
			oiw.platform_buyer_id,	<!-- #买家id -->
			oiw.carrier_id,			<!-- #快递id -->
			oiw.tracking_num,		<!-- #快递单号 -->
			oiw.iid,			<!-- #商品id -->
			oiw.erp_item_num,	<!-- #商品erp编码 -->
			oiw.name,			<!-- #商品名 -->
			oiw.image1,			<!-- #商品主图 -->
			oiw.color,			<!-- #商品颜色 -->
			oiw.size,			<!-- #商品尺寸 -->
			oiw.normal_price,	<!-- #商品原价 -->
			oiw.quantity,		<!-- #商品数量-同种 -->
			
			oiw.warehouse_id,	<!-- #仓库id -->
			w.name	wname		<!-- #仓库名称 -->
		FROM
			(SELECT
				oi.id,					<!-- #订单id -->
				oi.erp_order_num,		<!-- #订单erp编码 -->
				oi.platform_order_id,	<!-- #平台订单id -->
				oi.invoice_title,		<!-- #发票抬头 -->
				oi.invoice_detail,		<!-- #发票明细 -->
				oi.buyer_word,			<!-- #买家留言 -->
				oi.seller_word,			<!-- #卖家备注 -->
				oi.order_pay,			<!-- #付款时间 -->
				oi.order_status,		<!-- #订单状态 -->
				
				oi.platform_id,			<!-- #平台id -->
				oi.shop_id,				<!-- #店铺id -->
				oi.platform_buyer_id,	<!-- #买家id -->
				oi.carrier_id,			<!-- #快递id -->
				oi.tracking_num,		<!-- #快递单号 -->
				oi.iid,				<!-- #商品id -->
				<!-- io.id, -->		<!-- #商品id -->
				io.erp_item_num,	<!-- #商品erp编码 -->
				io.name,			<!-- #商品名 -->
				io.image1,			<!-- #商品主图 -->
				io.color,			<!-- #商品颜色 -->
				io.size,			<!-- #商品尺寸 -->
				io.normal_price,	<!-- #商品原价 -->
				oi.quantity,		<!-- #商品数量-同种 -->
				io.warehouse_id		<!-- #仓库id -->
			FROM	
				(SELECT
					o.id,				<!-- #订单id -->
					o.erp_order_num,		<!-- #订单erp编码 -->
					o.platform_order_id,	<!-- #平台订单id -->
					o.invoice_title,		<!-- #发票抬头 -->
					o.invoice_detail,		<!-- #发票明细 -->
					o.buyer_word,			<!-- #买家留言 -->
					o.seller_word,			<!-- #卖家备注 -->
					o.order_pay,			<!-- #付款时间 -->
					o.order_status,			<!-- #订单状态 -->
					
					o.platform_id,			<!-- #平台id -->
					o.shop_id,				<!-- #店铺id -->
					o.platform_buyer_id,	<!-- #买家id -->
					o.carrier_id,			<!-- #快递id -->
					o.tracking_num,			<!-- #快递单号 -->
					
					
					oil.order_item_id iid,	<!-- #关联表商品id -->
					oil.quantity			<!-- #关联表商品数量 -->
				FROM
	</sql>
	<sql id="Base_Search2" >
		 o			<!-- #订单表 -->
				LEFT JOIN
					order_item_link oil			<!-- #关联表（替换为商品信息）************ -->
				ON
					oil.erp_order_id=o.id	<!-- #关联表订单id=订单表id -->
				) oi	<!-- #订单信息及商品id -->
			LEFT JOIN
				item_common_info io
			ON 	io.id=oi.iid
			) oiw	<!-- #订单信息、商品信息、仓库id -->
		LEFT JOIN
			warehouse_info w
		ON
			w.id=oiw.warehouse_id
	</sql>
  <select id="listOrderItemInfo_SByLimtSelective" parameterType="com.rongcheng.erp.dto.OrderItemInfo_S" resultMap="ResultMap">
  		<include refid="Base_Search1"/>
			(SELECT
				<include refid="Min_Column_List"></include>
			FROM
				order_info
			<where>
			      <include refid="Order_Where"></include>
			</where>
			order by
				IF(ISNULL(order_pay),0,1) DESC,order_pay
			<if test="start != null" >
				limit #{start},#{rows}
			</if>
			)
	<include refid="Base_Search2"/>
  </select>
  <select id="getMaxId" resultType="java.math.BigInteger">
  	select MAX(id) from order_info
  </select>
  <select id="getLastCreateTime" resultType="java.util.Date">
		SELECT 	
			MAX(gmt_create)
		FROM 
			order_info
		WHERE
			owner_id=#{0}
			and platform_id = #{1}
	</select>
</mapper>